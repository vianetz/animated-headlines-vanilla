"use strict";var AnimationType,DefaultOptions;function AnimatedHeadline(t,e={}){const i=document.querySelector(t);let s;switch(e.animationType){case AnimationType.Clip:s=new ClipAnimatedWords(i,e.animationDelay,e.revealAnimationDelay,e.revealDuration);break;case AnimationType.LoadingBar:s=new LoadingBarAnimatedWords(i,e.barAnimationDelay,e.barWaiting);break;case AnimationType.Push:case AnimationType.Slide:case AnimationType.Rotate1:case AnimationType.Zoom:s=new AnimatedWords(i,e.animationDelay);break;case AnimationType.Scale:case AnimationType.Rotate2:case AnimationType.Rotate3:s=new AnimatedSingleLetters(i,e.animationDelay,e.lettersDelay);break;case AnimationType.Type:s=new TypeAnimatedWords(i,e.animationDelay,e.lettersDelay,e.typeAnimationDelay,e.selectionDuration);break;default:throw"invalid animation type "+e.animationType}return i.classList.add(e.animationType),s}function animate(t,e,i){let s=performance.now();requestAnimationFrame((function a(n){let r=(n-s)/i;r>1&&(r=1);let o=t(r);e(o),r<1&&requestAnimationFrame(a)}))}!function(t){t.Clip="clip",t.LoadingBar="loading-bar",t.Push="push",t.Rotate1="rotate-1",t.Rotate2="rotate-2",t.Rotate3="rotate-3",t.Scale="scale",t.Slide="slide",t.Type="type",t.Zoom="zoom"}(AnimationType||(AnimationType={})),function(t){t[t.AnimationDelay=2500]="AnimationDelay",t[t.LettersDelay=50]="LettersDelay"}(DefaultOptions||(DefaultOptions={}));class AnimatedWords{#t=!1;duration=0;animationDelay;rootElement;wordSelector="b";visibleClassName="is-visible";hiddenClassName="is-hidden";constructor(t,e=DefaultOptions.AnimationDelay){this.rootElement=t,this.animationDelay=e,this.duration=e,this.init(),this.start()}init(){this.resize()}resize(){let t=0;this.rootElement.querySelectorAll(this.wordSelector).forEach((function(e){t=Math.max(e.offsetWidth,t)})),this.rootElement.style.width=t.toString()}start(){this.#t=!1,this.runAfter(this.duration,(()=>this.next()))}stop(){this.#t=!0}current(){const t=this.rootElement.querySelector(this.wordSelector+"."+this.visibleClassName);return null===t?this.rootElement.querySelector(this.wordSelector):t}next(t=null){t=t??this.current();const e=this.getNextWord(t);this.switchWord(t,e),this.runAfter(this.animationDelay,(()=>this.next(e)))}getNextWord(t){return t.nextElementSibling?t.nextElementSibling:t.parentNode.children[0]}switchWord(t,e){this.makeHidden(t),this.makeVisible(e)}makeVisible(t){t.classList.remove(this.hiddenClassName),t.classList.add(this.visibleClassName)}makeHidden(t){t.classList.remove(this.visibleClassName),t.classList.add(this.hiddenClassName)}runAfter(t,e){animate((t=>t),(t=>{if(this.#t)throw"execution aborted";1===t&&e()}),t)}}class AnimatedSingleLetters extends AnimatedWords{lettersDelay;letterClassName="letter";constructor(t,e=DefaultOptions.AnimationDelay,i=DefaultOptions.LettersDelay){super(t,e),this.lettersDelay=i,this.rootElement.querySelectorAll(this.wordSelector).forEach(this.splitIntoSingleLetters,this)}next(t=null){t=t??this.current();const e=this.getNextWord(t),i=t.querySelectorAll("."+this.letterClassName).length>=e.querySelectorAll("."+this.letterClassName).length;this.hideLetter(t.querySelector("."+this.letterClassName),t,i),this.showLetter(e.querySelector("."+this.letterClassName),e,!i)}hideLetter(t,e,i){this.hideOrShowLetter(t,e,i,!0)}showLetter(t,e,i){this.hideOrShowLetter(t,e,i,!1)}hideOrShowLetter(t,e,i=!0,s=!1){s?this.makeHidden(t):this.makeVisible(t),t.nextElementSibling?this.runAfter(this.lettersDelay,(()=>this.hideOrShowLetter(t.nextElementSibling,e,i,s))):i&&this.runAfter(this.animationDelay,(()=>this.next(s?this.getNextWord(e):e)))}splitIntoSingleLetters(t){const e=this.visibleClassName,i=t.textContent.split(""),s=t.classList.contains(e);for(let t in i){const a=document.createElement("span");a.classList.add(this.letterClassName),s&&a.classList.add(e),a.innerHTML=i[t],i[t]=a.outerHTML}t.innerHTML=i.join(""),t.style.opacity="1"}}class TypeAnimatedWords extends AnimatedSingleLetters{#e="waiting";#i="selected";typeAnimationDelay;selectionDuration;constructor(t,e=DefaultOptions.AnimationDelay,i=DefaultOptions.LettersDelay,s=1300,a=500){super(t,e,i),this.typeAnimationDelay=s,this.selectionDuration=a}resize(){}showWord(t){this.showLetter(t.querySelector("."+this.letterClassName),t),this.makeVisible(t)}next(t=null){t=t??this.current();const e=this.getNextWord(t),i=t.parentNode;i.classList.add(this.#i),i.classList.remove(this.#e),this.runAfter(this.selectionDuration,(()=>{i.classList.remove(this.#i),this.makeHidden(t),t.querySelectorAll("."+this.letterClassName).forEach((t=>{this.makeHidden(t)}))})),this.runAfter(this.typeAnimationDelay,(()=>this.showWord(e)))}showLetter(t,e,i=!0){super.showLetter(t,e,i),t.nextElementSibling||this.runAfter(200,(()=>e.parentNode.classList.add(this.#e)))}}class ClipAnimatedWords extends AnimatedWords{revealAnimationDelay;revealDuration;constructor(t,e=DefaultOptions.AnimationDelay,i=1500,s=600){super(t,e),this.revealAnimationDelay=i,this.revealDuration=s}resize(){this.rootElement.style.width=String(this.rootElement.offsetWidth+10)}showWord(t){t.parentNode.animate([{width:"2px"},{width:t.offsetWidth+"px"}],{duration:this.revealDuration}).onfinish=e=>{this.runAfter(this.revealAnimationDelay,(()=>this.next(t)))}}next(t=null){t=t??this.current();const e=this.getNextWord(t);t.parentNode.animate([{width:t.offsetWidth+"px"},{width:"2px"}],{duration:this.revealDuration}).onfinish=i=>{this.switchWord(t,e),this.showWord(e)}}}class LoadingBarAnimatedWords extends AnimatedWords{#s="is-loading";barWaiting;constructor(t,e=3800,i=800){super(t,e),this.barWaiting=i}init(){super.init(),this.runAfter(this.barWaiting,(()=>this.rootElement.classList.add(this.#s)))}next(t=null){super.next(t),(t=t??this.current()).parentNode.classList.remove(this.#s),this.runAfter(this.barWaiting,(()=>t.parentNode.classList.add(this.#s)))}}
