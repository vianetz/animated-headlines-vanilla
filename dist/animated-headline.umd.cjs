(function(n,l){typeof exports=="object"&&typeof module<"u"?l(exports):typeof define=="function"&&define.amd?define(["exports"],l):(n=typeof globalThis<"u"?globalThis:n||self,l(n.AnimatedHeadline={}))})(this,(function(n){"use strict";/**!
 * @author Geoff Selby
 * @author Christoph Massmann <cm@vianetz.com>
 * @license https://opensource.org/licenses/MIT MIT License
 */function l(a,e,t){let i=performance.now();requestAnimationFrame(function s(d){let h=(d-i)/t;h>1&&(h=1);let y=a(h);e(y),h<1&&requestAnimationFrame(s)})}class r extends HTMLElement{#e=!1;holdDelay=2500;wordSelector="b";connectedCallback(){this.holdDelay=this.hasAttribute("hold")?parseInt(this.getAttribute("hold")):this.holdDelay,this.resize(),window.matchMedia("(prefers-reduced-motion: reduce)").matches||this.start()}attributeChangedCallback(){this.resize()}resize(){let e=0;this.querySelectorAll(this.wordSelector).forEach(function(t){e=Math.max(t.offsetWidth,e)}),this.style.width=e.toString()}start(){this.#e=!1,this.runAfter(this.holdDelay,()=>this.next())}stop(){this.#e=!0}current(){return this.querySelector(this.wordSelector+":not([hidden])")??this.querySelector(this.wordSelector)}next(e=null){if(e=e??this.current(),e===null)return;const t=this.getNextWord(e);this.switchWord(e,t),this.runAfter(this.holdDelay,()=>this.next(t))}getNextWord(e){return e.nextElementSibling?e.nextElementSibling:e.parentNode.children[0]}switchWord(e,t){this.makeHidden(e),this.makeVisible(t)}makeVisible(e){e.removeAttribute("hidden")}makeHidden(e){e.setAttribute("hidden","")}runAfter(e,t){l(i=>i,i=>{if(this.#e)throw"execution aborted";i===1&&t()},e)}}customElements.define("via-animated-words-headline",r);/**!
 * @author Geoff Selby
 * @author Christoph Massmann <cm@vianetz.com>
 * @license https://opensource.org/licenses/MIT MIT License
 */class c extends r{lettersDelay=50;letterClassName="letter";connectedCallback(){super.connectedCallback(),this.lettersDelay=this.hasAttribute("delay")?parseInt(this.getAttribute("delay")):this.lettersDelay,this.querySelectorAll(this.wordSelector).forEach(this.splitIntoSingleLetters,this)}next(e=null){if(e=e??this.current(),e===null)return;const t=this.getNextWord(e),i=e.querySelectorAll("."+this.letterClassName).length>=t.querySelectorAll("."+this.letterClassName).length;this.hideLetter(e.querySelector("."+this.letterClassName),e,i),this.showLetter(t.querySelector("."+this.letterClassName),t,!i),this.switchWord(e,t)}hideLetter(e,t,i){this.hideOrShowLetter(e,t,i,!0)}showLetter(e,t,i){this.hideOrShowLetter(e,t,i,!1)}hideOrShowLetter(e,t,i=!0,s=!1){s?this.makeHidden(e):this.makeVisible(e),e.nextElementSibling?this.runAfter(this.lettersDelay,()=>this.hideOrShowLetter(e.nextElementSibling,t,i,s)):i&&this.runAfter(this.holdDelay,()=>this.next(s?this.getNextWord(t):t))}splitIntoSingleLetters(e){const t=e.textContent.split("");for(let i in t){const s=document.createElement("span");s.classList.add(this.letterClassName),e.hasAttribute("hidden")&&s.setAttribute("hidden",""),s.innerHTML=t[i],t[i]=s.outerHTML}e.innerHTML=t.join(""),e.style.opacity="1"}}customElements.define("via-animated-letters-headline",c);/**!
 * @author Geoff Selby
 * @author Christoph Massmann <cm@vianetz.com>
 * @license https://opensource.org/licenses/MIT MIT License
 */class u extends r{revealDelay=600;connectedCallback(){super.connectedCallback(),this.revealDelay=this.hasAttribute("delay")?parseInt(this.getAttribute("delay")):this.revealDelay}resize(){this.style.width=String(this.offsetWidth+10)}showWord(e){let t=e.parentNode.animate([{width:"2px"},{width:e.offsetWidth+"px"}],{duration:this.revealDelay});t.onfinish=i=>this.runAfter(this.holdDelay,()=>this.next(e))}next(e=null){if(e=e??this.current(),e===null)return;const t=this.getNextWord(e);let i=e.parentNode.animate([{width:e.offsetWidth+"px"},{width:"2px"}],{duration:this.revealDelay});i.onfinish=s=>{this.switchWord(e,t),this.showWord(t)}}}customElements.define("via-animated-clip-headline",u);/**!
 * @author Geoff Selby
 * @author Christoph Massmann <cm@vianetz.com>
 * @license https://opensource.org/licenses/MIT MIT License
 */class m extends r{#e="is-loading";barDelay=500;connectedCallback(){super.connectedCallback(),this.barDelay=this.hasAttribute("delay")?parseInt(this.getAttribute("delay")):this.barDelay,this.runAfter(this.barDelay,()=>this.classList.add(this.#e))}next(e=null){super.next(e),e=e??this.current(),e!==null&&(e.parentNode.classList.remove(this.#e),this.runAfter(this.barDelay,()=>e.parentNode.classList.add(this.#e)))}}customElements.define("via-animated-loading-headline",m);/**!
 * @author Geoff Selby
 * @author Christoph Massmann <cm@vianetz.com>
 * @license https://opensource.org/licenses/MIT MIT License
 */class f extends c{#e="waiting";#t="selected";selectionDuration=500;connectedCallback(){super.connectedCallback(),this.selectionDuration=this.hasAttribute("selection")?parseInt(this.getAttribute("selection")):this.selectionDuration}resize(){}showWord(e){this.showLetter(e.querySelector("."+this.letterClassName),e),this.makeVisible(e)}next(e=null){if(e=e??this.current(),e===null)return;const t=this.getNextWord(e),i=e.parentNode;i.classList.add(this.#t),i.classList.remove(this.#e),this.runAfter(this.selectionDuration,()=>{i.classList.remove(this.#t),this.makeHidden(e),e.querySelectorAll("."+this.letterClassName).forEach(s=>this.makeHidden(s))}),this.runAfter(this.selectionDuration*2,()=>this.showWord(t))}showLetter(e,t,i=!0){super.showLetter(e,t,i),e.nextElementSibling||this.runAfter(200,()=>t.parentNode.classList.add(this.#e))}}customElements.define("via-animated-type-headline",f);/**!
 * Plain Vanilla JavaScript Animated Headline Component
 *
 * @author Geoff Selby
 * @author Christoph Massmann <cm@vianetz.com>
 * @license https://opensource.org/licenses/MIT MIT License
 */var o=(a=>(a.Clip="clip",a.LoadingBar="loading-bar",a.Push="push",a.Rotate1="rotate-1",a.Rotate2="rotate-2",a.Rotate3="rotate-3",a.Scale="scale",a.Slide="slide",a.Type="type",a.Zoom="zoom",a))(o||{});function b(a,e={}){let t;switch(a){case"clip":t=document.createElement("via-animated-clip-headline");break;case"loading-bar":t=document.createElement("via-animated-loading-headline");break;case"push":case"slide":case"rotate-1":case"zoom":t=document.createElement("via-animated-words-headline");break;case"scale":case"rotate-2":case"rotate-3":t=document.createElement("via-animated-letters-headline");break;case"type":t=document.createElement("via-animated-type-headline");break;default:throw"invalid animation type "+a+" (must be one of "+Object.values(o)+")"}for(const[i,s]of Object.entries(e))t.setAttribute(i,s??"");return t}class p extends HTMLElement{static get observedAttributes(){return["animation","hold","delay"]}connectedCallback(){this.render()}attributeChangedCallback(){this.render()}render(){const e=this.getAttribute("animation"),t={};for(const s of this.attributes)s.name!=="type"&&(t[s.name]=s.value);const i=b(e,t);Array.from(this.children).forEach(s=>{s.tagName?.startsWith("VIA-ANIMATED-")?s.childNodes.forEach(d=>i.appendChild(d.cloneNode(!0))):i.appendChild(s.cloneNode(!0))}),this.innerHTML="",this.appendChild(i)}}customElements.define("via-animated-headline",p),n.AnimationType=o,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
